parameters:
  dotnetSdkVersion: ''

jobs:
  - job: Compile ${{ parameters.dotnetSdkVersion }}
    pool:
      vmImage: 'ubuntu-16.04'
    steps:
      - template: 'nuget/determine-pr-version.yml@templates'
        parameters:
          manualTriggerVersion: $(Package.Version.ManualTrigger)
      - template: 'build/build-solution.yml@templates'
        parameters:
          dotnetSdkVersion: '${{ parameters.dotnetSdkVersion }}'
          versionSuffix: '$(packageVersion)'
      - task: CopyFiles@2
        displayName: 'Copy build artifacts'
        inputs:
          contents: '**/?(bin|obj)/**'
          targetFolder: '$(Pipeline.Workspace)/build'
      - task: PublishPipelineArtifact@0
        displayName: 'Publish build artifacts'
        inputs:
          targetPath: '$(Pipeline.Workspace)/build'
          artifactName: Build
