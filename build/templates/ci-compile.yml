parameters:
  dotnetSdkVersions: []

jobs:
  - job: Compile
    pool:
      vmImage: 'ubuntu-16.04'
    steps:
      - ${{ each version in parameters.dotnetSdkVersions }}:
          - template: 'nuget/determine-pr-version.yml@templates'
            parameters:
              manualTriggerVersion: $(Package.Version.ManualTrigger)
          - template: 'build/build-solution.yml@templates'
            parameters:
              dotnetSdkVersion: '${{ version }}'
              versionSuffix: '$(packageVersion)'
          - task: CopyFiles@2
            displayName: 'Copy build artifacts'
            inputs:
              contents: '**/?(bin|obj)/**'
              targetFolder: '$(Pipeline.Workspace)/build-${{ version }}'
          - task: PublishPipelineArtifact@0
            displayName: 'Publish build artifacts'
            inputs:
              targetPath: '$(Pipeline.Workspace)/build-${{ version }}'
              artifactName: 'Build-${{ version }}'
